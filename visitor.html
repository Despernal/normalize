<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>normalize.visitor reference &mdash; normalize 0.5.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="normalize 0.5.0 documentation" href="index.html" />
    <link rel="prev" title="Comparing Records - normalize.diff" href="diff.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="diff.html" title="Comparing Records - normalize.diff"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">normalize 0.5.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="normalize-visitor-reference">
<h1><tt class="docutils literal"><span class="pre">normalize.visitor</span></tt> reference<a class="headerlink" href="#normalize-visitor-reference" title="Permalink to this headline">¶</a></h1>
<p>This Visitor class is an attempt at unifying the various visitor
functions used through the rest of the module, as well as providing a
convenient API for working with normalize data structures.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Cycle detection is still TODO (but close).  Be careful if using
data structures with cycles.</p>
</div>
<dl class="class">
<dt id="normalize.visitor.Visitor">
<em class="property">class </em><tt class="descclassname">normalize.visitor.</tt><tt class="descname">Visitor</tt><big>(</big><em>unpack_func</em>, <em>apply_func</em>, <em>collect_func</em>, <em>reduce_func</em>, <em>apply_empty_slots=False</em>, <em>extraneous=False</em>, <em>ignore_empty_string=False</em>, <em>ignore_none=True</em>, <em>visit_filter=None</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#Visitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.Visitor" title="Permalink to this definition">¶</a></dt>
<dd><p>The Visitor object represents a single recursive visit in progress.  You
hopefully shouldn&#8217;t have to sub-class this class for most use cases; just
VisitorPattern.</p>
<dl class="method">
<dt id="normalize.visitor.Visitor.__init__">
<tt class="descname">__init__</tt><big>(</big><em>unpack_func</em>, <em>apply_func</em>, <em>collect_func</em>, <em>reduce_func</em>, <em>apply_empty_slots=False</em>, <em>extraneous=False</em>, <em>ignore_empty_string=False</em>, <em>ignore_none=True</em>, <em>visit_filter=None</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#Visitor.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.Visitor.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new Visitor object.  Generally called by a front-end class
method of <tt class="xref py py-class docutils literal"><span class="pre">VisitorPattern</span></tt></p>
<p>There are four positional arguments, which specify the particular
functions to be used during the visit.  The important options from a
user of a visitor are the keyword arguments:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">apply_empty_slots=</span></tt><em>bool</em></dt>
<dd>If set, then your <tt class="docutils literal"><span class="pre">apply</span></tt> method (or <tt class="docutils literal"><span class="pre">reverse</span></tt>, etc) will
be called even if there is no corresponding value in the input.
Your method will receive the Exception as if it were the value.</dd>
<dt><tt class="docutils literal"><span class="pre">extraneous=</span></tt><em>bool</em></dt>
<dd>Also call the apply method on properties marked <em>extraneous</em>.
False by default.</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_empty_string=</span></tt><em>bool</em></dt>
<dd>If the &#8216;apply&#8217; function returns the empty string, treat it as
if the slot or object did not exist.  <tt class="docutils literal"><span class="pre">False</span></tt> by default.</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_none=</span></tt><em>bool</em></dt>
<dd>If the &#8216;apply&#8217; function returns <tt class="docutils literal"><span class="pre">None</span></tt>, treat it as if the
slot or object did not exist.  <tt class="docutils literal"><span class="pre">True</span></tt> by default.</dd>
<dt><tt class="docutils literal"><span class="pre">visit_filter=</span></tt><em>MultiFieldSelector</em></dt>
<dd>This supplies an instance of
<a class="reference internal" href="selector.html#normalize.selector.MultiFieldSelector" title="normalize.selector.MultiFieldSelector"><tt class="xref py py-class docutils literal"><span class="pre">normalize.selector.MultiFieldSelector</span></tt></a>, and
restricts the operation to the matched object fields.</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="normalize.visitor.Visitor.copy">
<tt class="descname">copy</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#Visitor.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.Visitor.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Be sure to implement this method when sub-classing, otherwise you
will lose any specialization context.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="normalize.visitor.VisitorPattern">
<em class="property">class </em><tt class="descclassname">normalize.visitor.</tt><tt class="descname">VisitorPattern</tt><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Base Class for writing Record visitor pattern classes.  These classes
are not instantiated, and consist purely of class methods.</p>
<p>There are three visitors supplied by default, which correspond to typical
use for IO (<a class="reference internal" href="#normalize.visitor.VisitorPattern.visit" title="normalize.visitor.VisitorPattern.visit"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.visit()</span></tt></a> for output,
and <a class="reference internal" href="#normalize.visitor.VisitorPattern.cast" title="normalize.visitor.VisitorPattern.cast"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.cast()</span></tt></a> for input), and for
providing a centralized type catalogue
(<a class="reference internal" href="#normalize.visitor.VisitorPattern.reflect" title="normalize.visitor.VisitorPattern.reflect"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.reflect()</span></tt></a>).</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="15%" />
<col width="18%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><tt class="docutils literal"><span class="pre">visit</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">cast</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">reflect</span></tt></th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">unpack</span></tt></td>
<td><tt class="docutils literal"><span class="pre">grok</span></tt></td>
<td><tt class="docutils literal"><span class="pre">scantypes</span></tt></td>
<td>Defines how to get a property value
from the thing being walked, and a
generator for the collection.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">apply</span></tt></td>
<td><tt class="docutils literal"><span class="pre">reverse</span></tt></td>
<td><tt class="docutils literal"><span class="pre">propinfo</span></tt></td>
<td>Conversion for individual values</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">aggregate</span></tt></td>
<td><tt class="docutils literal"><span class="pre">collect</span></tt></td>
<td><tt class="docutils literal"><span class="pre">itemtypes</span></tt></td>
<td>Combine collection results</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">reduce</span></tt></td>
<td><tt class="docutils literal"><span class="pre">produce</span></tt></td>
<td><tt class="docutils literal"><span class="pre">typeinfo</span></tt></td>
<td>Combine apply results</td>
</tr>
</tbody>
</table>
<p>To customize what is emitted, sub-class <tt class="docutils literal"><span class="pre">VisitorPattern</span></tt> and override the
class methods of the conversion you are interested in.  For many simple IO
use cases, you might need only to override are <tt class="docutils literal"><span class="pre">apply</span></tt> and <tt class="docutils literal"><span class="pre">reverse</span></tt>,
if that.</p>
<p>The versions for <tt class="docutils literal"><span class="pre">visit</span></tt> are documented the most thoroughly, as these are
the easiest to understand and the ones most users will be customizing.  The
documentation for the other methods describes the differences between them
and their <tt class="docutils literal"><span class="pre">visit</span></tt> counterpart.</p>
<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.visit">
<em class="property">classmethod </em><tt class="descname">visit</tt><big>(</big><em>value</em>, <em>value_type=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.visit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.visit" title="Permalink to this definition">¶</a></dt>
<dd><p>A value visitor, which visits instances (typically), applies
<a class="reference internal" href="#normalize.visitor.VisitorPattern.apply" title="normalize.visitor.VisitorPattern.apply"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.apply()</span></tt></a> to every attribute
slot, and returns the reduced result.</p>
<p>Like <a class="reference internal" href="diff.html#normalize.diff.diff" title="normalize.diff.diff"><tt class="xref py py-func docutils literal"><span class="pre">normalize.diff.diff()</span></tt></a>, this function accepts a series of
keyword arguments, which are passed through to
<a class="reference internal" href="#normalize.visitor.Visitor" title="normalize.visitor.Visitor"><tt class="xref py py-class docutils literal"><span class="pre">normalize.visitor.Visitor</span></tt></a>.</p>
<p>This function also takes positional arguments:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">value=</span></tt><em>object</em></dt>
<dd>The value to visit.  Normally (but not always) a
<a class="reference internal" href="record.html#normalize.record.Record" title="normalize.record.Record"><tt class="xref py py-class docutils literal"><span class="pre">normalize.record.Record</span></tt></a> instance.</dd>
<dt><tt class="docutils literal"><span class="pre">value_type=</span></tt><em>RecordType</em></dt>
<dd>This is the <tt class="docutils literal"><span class="pre">Record</span></tt> subclass to interpret <tt class="docutils literal"><span class="pre">value</span></tt> as.  The
default is <tt class="docutils literal"><span class="pre">type(value)</span></tt>.  If you specify this, then the type
information on <tt class="docutils literal"><span class="pre">value</span></tt> is essentially ignored (with the
caveat mentioned below on <tt class="xref py py-meth docutils literal"><span class="pre">Visitor.map_prop()</span></tt>), and may
be a <tt class="docutils literal"><span class="pre">dict</span></tt>, <tt class="docutils literal"><span class="pre">list</span></tt>, etc.</dd>
<dt><tt class="docutils literal"><span class="pre">**kwargs</span></tt></dt>
<dd>Visitor options accepted by
<a class="reference internal" href="#normalize.visitor.Visitor.__init__" title="normalize.visitor.Visitor.__init__"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.Visitor.__init__()</span></tt></a>.</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.unpack">
<em class="property">classmethod </em><tt class="descname">unpack</tt><big>(</big><em>value</em>, <em>value_type</em>, <em>visitor</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.unpack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.unpack" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack a value during a &#8216;visit&#8217;</p>
<p>args:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">value=</span></tt><em>object</em></dt>
<dd>The instance being visited</dd>
<dt><tt class="docutils literal"><span class="pre">value_type=</span></tt><em>RecordType</em></dt>
<dd>The expected type of the instance</dd>
<dt><tt class="docutils literal"><span class="pre">visitor=</span></tt><em>Visitor</em></dt>
<dd>The context/options</dd>
</dl>
</div></blockquote>
<p>returns a tuple with two items:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">get_prop=</span></tt><em>function</em></dt>
<dd>This function should take a
<a class="reference internal" href="property.html#normalize.property.Property" title="normalize.property.Property"><tt class="xref py py-class docutils literal"><span class="pre">normalize.property.Property</span></tt></a> instance, and return
the slot from the value, or raise <tt class="docutils literal"><span class="pre">AttributeError</span></tt> or
<tt class="docutils literal"><span class="pre">KeyError</span></tt> if the slot is empty.</dd>
<dt><tt class="docutils literal"><span class="pre">get_item=</span></tt><em>generator</em></dt>
<dd>This generator should return the tuple protocol used by
<a class="reference internal" href="record.html#normalize.coll.Collection" title="normalize.coll.Collection"><tt class="xref py py-class docutils literal"><span class="pre">normalize.coll.Collection</span></tt></a>: (K, V) where K can be an
ascending integer (for sequences), V (for sets), or something
hashable like a string (for dictionaries/maps)</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.apply">
<em class="property">classmethod </em><tt class="descname">apply</tt><big>(</big><em>value</em>, <em>prop</em>, <em>visitor</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>&#8216;apply&#8217; is a general place to put a function which is called on
every extant record slot.  This is usually the most important function
to implement when sub-classing.</p>
<p>The default implementation passes through the slot value as-is, but
expected exceptions are converted to <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
<p>args:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">value=</span></tt><em>value</em>|<em>AttributeError</em>|<em>KeyError</em></dt>
<dd>This is the value currently in the slot, or the Record itself
with the <tt class="docutils literal"><span class="pre">apply_records</span></tt> visitor option.  <em>AttributeError</em>
will only be received if you passed <tt class="docutils literal"><span class="pre">apply_empty_slots</span></tt>, and
<em>KeyError</em> will be passed if <tt class="docutils literal"><span class="pre">parent_obj</span></tt> is a <tt class="docutils literal"><span class="pre">dict</span></tt> (see
<tt class="xref py py-meth docutils literal"><span class="pre">Visitor.map_prop()</span></tt> for details about when this might
happen)</dd>
<dt><tt class="docutils literal"><span class="pre">prop=</span></tt><em>Property</em>|<tt class="docutils literal"><span class="pre">None</span></tt></dt>
<dd>This is the <tt class="xref py py-class docutils literal"><span class="pre">normalize.Property</span></tt> instance which
represents the field being traversed.</dd>
<dt><tt class="docutils literal"><span class="pre">visitor=</span></tt><em>Visitor</em></dt>
<dd>This object can be used to inspect parameters of the current
run, such as options which control which kinds of values are
visited, which fields are being visited and where the function
is in relation to the starting point.</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.aggregate">
<em class="property">classmethod </em><tt class="descname">aggregate</tt><big>(</big><em>mapped_coll_generator</em>, <em>coll_type</em>, <em>visitor</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.aggregate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.aggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook called for each normalize.coll.Collection, after mapping over
each of the items in the collection.</p>
<p>The default implementation calls
<a class="reference internal" href="record.html#normalize.coll.Collection.tuples_to_coll" title="normalize.coll.Collection.tuples_to_coll"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.coll.Collection.tuples_to_coll()</span></tt></a> with
<tt class="docutils literal"><span class="pre">coerce=False</span></tt>, which just re-assembles the collection into a native
python collection type of the same type of the input collection.</p>
<p>args:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">result_coll_generator=</span></tt> <em>generator func</em></dt>
<dd>Generator which returns (key, value) pairs (like
<a class="reference internal" href="record.html#normalize.coll.Collection.itertuples" title="normalize.coll.Collection.itertuples"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.coll.Collection.itertuples()</span></tt></a>)</dd>
<dt><tt class="docutils literal"><span class="pre">coll_type=</span></tt><em>CollectionType</em></dt>
<dd>This is the <a class="reference internal" href="record.html#normalize.coll.Collection" title="normalize.coll.Collection"><tt class="xref py py-class docutils literal"><span class="pre">normalize.coll.Collection</span></tt></a>-derived
<em>class</em> which is currently being reduced.</dd>
<dt><tt class="docutils literal"><span class="pre">visitor=</span></tt><em>Visitor</em></dt>
<dd>Context/options object</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.reduce">
<em class="property">classmethod </em><tt class="descname">reduce</tt><big>(</big><em>mapped_props</em>, <em>aggregated</em>, <em>value_type</em>, <em>visitor</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.reduce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>This reduction is called to combine the mapped slot and collection
item values into a single value for return.</p>
<p>The default implementation tries to behave naturally; you&#8217;ll almost
always get a dict back when mapping over a record, and list or some
other collection when mapping over collections.</p>
<p>If the collection has additional properties which are not ignored (eg,
not extraneous, not filtered), then the result will be a dictionary
with the results of mapping the properties, and a &#8216;values&#8217; key will be
added with the result of mapping the items in the collection.</p>
<p>args:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">mapped_props=</span></tt><em>generator</em></dt>
<dd>Iterating over this generator will yield K, V pairs, where K is
<strong>the Property object</strong> and V is the mapped value.</dd>
<dt><tt class="docutils literal"><span class="pre">aggregated=</span></tt><em>object</em></dt>
<dd>This contains whatever <tt class="docutils literal"><span class="pre">aggregate</span></tt> returned, normally a list.</dd>
<dt><tt class="docutils literal"><span class="pre">value_type=</span></tt><em>RecordType</em></dt>
<dd>This is the type which is currently being reduced.
A <a class="reference internal" href="record.html#normalize.record.Record" title="normalize.record.Record"><tt class="xref py py-class docutils literal"><span class="pre">normalize.record.Record</span></tt></a> subclass</dd>
<dt><tt class="docutils literal"><span class="pre">visitor=</span></tt><em>Visitor</em></dt>
<dd>Contenxt/options object.</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.cast">
<em class="property">classmethod </em><tt class="descname">cast</tt><big>(</big><em>value_type</em>, <em>value</em>, <em>visitor=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.cast"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.cast" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast is for visitors where you are visiting some random data
structure (perhaps returned by a previous <tt class="docutils literal"><span class="pre">VisitorPattern.visit()</span></tt>
operation), and you want to convert back to the value type.</p>
<p>This function also takes positional arguments:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">value_type=</span></tt><em>RecordType</em></dt>
<dd>The type to cast to.</dd>
</dl>
<p><tt class="docutils literal"><span class="pre">value=</span></tt><em>object</em></p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">visitor=</span></tt><em>Visitor.Options</em></dt>
<dd>Specifies the visitor options, which customizes the descent
and reduction.</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.grok">
<em class="property">classmethod </em><tt class="descname">grok</tt><big>(</big><em>value</em>, <em>value_type</em>, <em>visitor</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.grok"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.grok" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#normalize.visitor.VisitorPattern.unpack" title="normalize.visitor.VisitorPattern.unpack"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.unpack()</span></tt></a> but called
for <tt class="docutils literal"><span class="pre">cast</span></tt> operations.  Expects to work with dictionaries and lists
instead of Record objects.</p>
<p>Reverses the transform performed in
<a class="reference internal" href="#normalize.visitor.VisitorPattern.reduce" title="normalize.visitor.VisitorPattern.reduce"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.reduce()</span></tt></a> for collections with
properties.</p>
<p>If you pass tuples to <tt class="docutils literal"><span class="pre">isa</span></tt> of your Properties, then you might need
to override this function and throw <tt class="docutils literal"><span class="pre">TypeError</span></tt> if the passed
<tt class="docutils literal"><span class="pre">value_type</span></tt> is not appropriate for <tt class="docutils literal"><span class="pre">value</span></tt>.</p>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.reverse">
<em class="property">classmethod </em><tt class="descname">reverse</tt><big>(</big><em>value</em>, <em>prop</em>, <em>visitor</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.reverse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.reverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#normalize.visitor.VisitorPattern.apply" title="normalize.visitor.VisitorPattern.apply"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.apply()</span></tt></a> but called
for <tt class="docutils literal"><span class="pre">cast</span></tt> operations.  The default implementation passes through but
squashes exceptions, just like apply.</p>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.collect">
<em class="property">classmethod </em><tt class="descname">collect</tt><big>(</big><em>mapped_coll_generator</em>, <em>coll_type</em>, <em>visitor</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.collect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.collect" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#normalize.visitor.VisitorPattern.aggregate" title="normalize.visitor.VisitorPattern.aggregate"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.aggregate()</span></tt></a>, but
coerces the mapped values to the collection item type on the way
through.</p>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.produce">
<em class="property">classmethod </em><tt class="descname">produce</tt><big>(</big><em>mapped_props</em>, <em>aggregated</em>, <em>value_type</em>, <em>visitor</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.produce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.produce" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#normalize.visitor.VisitorPattern.reduce" title="normalize.visitor.VisitorPattern.reduce"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.reduce()</span></tt></a>, but
constructs instances rather than returning plain dicts.</p>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.reflect">
<em class="property">classmethod </em><tt class="descname">reflect</tt><big>(</big><em>X</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.reflect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.reflect" title="Permalink to this definition">¶</a></dt>
<dd><p>Reflect is for visitors where you are exposing some information
about the types reachable from a starting type to an external system.
For example, a front-end, a REST URL router and documentation
framework, an avro schema definition, etc.</p>
<p>X can be a type or an instance.</p>
<p>This API should be considered <strong>experimental</strong></p>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.scantypes">
<em class="property">classmethod </em><tt class="descname">scantypes</tt><big>(</big><em>value</em>, <em>value_type</em>, <em>visitor</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.scantypes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.scantypes" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#normalize.visitor.VisitorPattern.unpack" title="normalize.visitor.VisitorPattern.unpack"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.unpack()</span></tt></a>, but
returns a getter which just returns the property, and a collection
getter which returns a set with a single item in it.</p>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.propinfo">
<em class="property">classmethod </em><tt class="descname">propinfo</tt><big>(</big><em>value</em>, <em>prop</em>, <em>visitor</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.propinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.propinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#normalize.visitor.VisitorPattern.apply" title="normalize.visitor.VisitorPattern.apply"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.apply()</span></tt></a>, but takes a
property and returns a dict with some basic info.  The default
implementation returns just the name of the property and the type in
here.</p>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.itemtypes">
<em class="property">classmethod </em><tt class="descname">itemtypes</tt><big>(</big><em>mapped_types</em>, <em>coll_type</em>, <em>visitor</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.itemtypes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.itemtypes" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#normalize.visitor.VisitorPattern.aggregate" title="normalize.visitor.VisitorPattern.aggregate"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.aggregate()</span></tt></a>, but
returns .  This will normally only get called with a single type.</p>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.typeinfo">
<em class="property">classmethod </em><tt class="descname">typeinfo</tt><big>(</big><em>propinfo</em>, <em>type_parameters</em>, <em>value_type</em>, <em>visitor</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.typeinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.typeinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#normalize.visitor.VisitorPattern.reduce" title="normalize.visitor.VisitorPattern.reduce"><tt class="xref py py-meth docutils literal"><span class="pre">normalize.visitor.VisitorPattern.reduce()</span></tt></a>, but returns
the final dictionary to correspond to a type definition.  The default
implementation returns just the type name, the list of properties, and
the item type for collections.</p>
</dd></dl>

<dl class="class">
<dt id="normalize.visitor.VisitorPattern.StopVisiting">
<em class="property">class </em><tt class="descname">StopVisiting</tt><big>(</big><em>return_value</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.StopVisiting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.StopVisiting" title="Permalink to this definition">¶</a></dt>
<dd><p>This sentinel value may be returned by a custom implementation of
<tt class="docutils literal"><span class="pre">unpack</span></tt> (or <tt class="docutils literal"><span class="pre">grok</span></tt>, or <tt class="docutils literal"><span class="pre">scantypes</span></tt>) to indicate that the descent
should be stopped immediately, instead of proceeding to descend into
sub-properties.  It can be passed a literal value to use as the mapped
value as a single constructor argument, or the class itself returned to
indicate no mapped value.</p>
</dd></dl>

<dl class="classmethod">
<dt id="normalize.visitor.VisitorPattern.map">
<em class="property">classmethod </em><tt class="descclassname">VisitorPattern.</tt><tt class="descname">map</tt><big>(</big><em>visitor</em>, <em>value</em>, <em>value_type</em><big>)</big><a class="reference internal" href="_modules/normalize/visitor.html#VisitorPattern.map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#normalize.visitor.VisitorPattern.map" title="Permalink to this definition">¶</a></dt>
<dd><p>The common visitor API used by all three visitor implementations.</p>
<p>args:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">visitor=</span></tt><em>Visitor</em></dt>
<dd>Visitor options instance: contains the callbacks to use to
implement the visiting, as well as traversal &amp; filtering
options.</dd>
<dt><tt class="docutils literal"><span class="pre">value=</span></tt><em>Object</em></dt>
<dd>Object being visited</dd>
<dt><tt class="docutils literal"><span class="pre">value_type=</span></tt><em>RecordType</em></dt>
<dd>The type object controlling the visiting.</dd>
</dl>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="diff.html"
                        title="previous chapter">Comparing Records - <tt class="docutils literal"><span class="pre">normalize.diff</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/visitor.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="diff.html" title="Comparing Records - normalize.diff"
             >previous</a> |</li>
        <li><a href="index.html">normalize 0.5.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Sam Vilain, Hearsay Social.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>